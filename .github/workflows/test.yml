name: Test
on: [push, pull_request]

jobs:
  lint:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v4
    - name: brew audit
      run: |
        for formula in Formula/*; do
          brew audit --formula --strict "$(basename ${formula%.rb})"
        done

  test:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v4
    - run: brew install Formula/*
    - run: brew test Formula/*
